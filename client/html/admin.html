<template name="electionMaker">
	<p>method: <select id="methPicker">{{#each allMethods}}
			<option value="{{this}}">{{this}}</option>
		{{/each}}</select></p>
		<p>Note: method only matters if howManyMore is blank/0.</p>
	<p>scenario: <select id="scenPicker">{{#each allScenarios}}
			<option value="{{this}}">{{this}}</option>
		{{/each}}</select></p>
	<p>howManyMore: <input type="text" id="howManyMore"></p>
	<p><button id="create">create</button></p>
</template>

<template name="payments">
	<table>
		
		<tr>
			<td>workerId</td>
			<td>stickyWorkerId</td>
			<td>faction</td>
			<td>steps</td>
			<td>votedRounds</td>
			<td>paymentDue</td>
		</tr>
	{{#each payments}}
		<tr>
			<td>{{workerId}}</td>
			<td>{{stickyWorkerId}}</td>
			<td>{{faction}}</td>
			<td>{{nSteps}}</td>
			<td>{{nVoted}}</td>
			<td>{{paymentDue}}</td>
		</tr>
	{{/each}}
	
	</table>
</template>
		
<template name="answers">
	<table>
		<tr>
			
			<td>eid</td>
			<td>faction</td>
			<td>method</td>
			<td>scenario</td>
			
			<td>p1</td>
			<td>p2</td>
			<td>p3</td>
	{{#each questions}}
			<td>{{name}}</td>
	{{/each}}
	
			<td>whenVoted</td>
			<td>showAveraged}</td>
			<td>blurbd</td>
			<td>subtotald</td>
		</tr>
	{{#each answerers}}
		<tr>
			<td>{{this.election}}</td>
			<td>{{this.faction}}</td>
			<td>{{this.method}}</td>
			<td>{{this.scenario}}</td>
			
			<td>{{this.payoffs.[0]}}</td>
			<td>{{this.payoffs.[1]}}</td>
			<td>{{this.payoffs.[2]}}</td>
		{{#each this.answerList}}
				<td>{{this}}</td>
		{{/each}}
			<td>{{this.whenVoted}}</td>
			<td>{{this.showAveraged}}</td>
			<td>{{this.blurbd}}</td>
			<td>{{this.subtotald}}</td>
		</tr>
	{{/each}}
	</table>
</template>


<template name="adminVoters">
	<table>
		<tr>
			<td>voter</td>
			<td>eid</td>
			<td>faction</td>
			<td>method</td>
			<td>scenario</td>
			<td>v1:A</td>
			<td>v1:B</td>
			<td>v1:C</td>
			<td>v1:win</td>
			<td>v2:A</td>
			<td>v2:B</td>
			<td>v2:C</td>
			<td>v2:win</td>
			<td>v3:A</td>
			<td>v3:B</td>
			<td>v3:C</td>
		</tr>
	{{#each adminVoters}}
		<tr>
			<td>{{this._id}}</td>
			<td>{{this.election}}</td>
			<td>{{this.faction}}</td>
			<td>{{this.method}}</td>
			<td>{{this.scenario}}</td>
			<td>{{v1.vote.[0]}}</td>
			<td>{{v1.vote.[1]}}</td>
			<td>{{v1.vote.[2]}}</td>
			<td><b>{{v2.prevWinner}}</b></td>
			<td>{{v2.vote.[0]}}</td>
			<td>{{v2.vote.[1]}}</td>
			<td></b>{{v2.vote.[2]}}</b></td>
			<td>{{v3.prevWinner}}</td>
			<td>{{v3.vote.[0]}}</td>
			<td>{{v3.vote.[1]}}</td>
			<td>{{v3.vote.[2]}}</td>
		</tr>
	{{/each}}
	</table>
</template>


<template name="adminVotes">
	<table>
		<tr>
			<td>voter</td>
			<td>eid</td>
			<td>faction</td>
			<td>method</td>
			<td>scenario</td>
			<td>stage</td>
			<td>prev_winner</td>
			<td>this_winner</td>
			<td>prev_payoff</td>
			<td>this_payoff</td>
			<td>c0</td>
			<td>c1</td>
			<td>c2</td>
			<td>NOTA</td>
			<td>favSupport</td>
			<td>midSupport</td>
			<td>oppSupport</td>
			<td>NOTASupport</td>
			
			
			
			<td>showAveraged}</td>
			<td>blurbd</td>
			<td>subtotald</td>
			<td>stagesSoFar</td>
			
		</tr>
	{{#each adminVotes}}
		<tr>
			<td>{{this.voter}}</td>
			<td>{{this.election}}</td>
			<td>{{this.faction}}</td>
			<td>{{this.method}}</td>
			<td>{{this.scenario}}</td>
			<td>{{this.stage}}</td>
			<td>{{this.prevWinner}}</td>
			<td>{{this.thisWinner}}</td>
			<td>{{this.prevPayoff}}</td>
			<td>{{this.thisPayoff}}</td>
			<td>{{this.vote.[0]}}</td>
			<td>{{this.vote.[1]}}</td>
			<td>{{this.vote.[2]}}</td>
			<td>{{this.vote.[3]}}</td>
			<td>{{this.support.[0]}}</td>
			<td>{{this.support.[1]}}</td>
			<td>{{this.support.[2]}}</td>
			<td>{{this.support.[3]}}</td>
			
			<td>{{this.showAveraged}}</td>
			<td>{{this.blurbd}}</td>
			<td>{{this.subtotald}}</td>
			<td>{{this.stagesSoFar}}</td>
		</tr>
	{{/each}}
	</table>
</template>

<template name="electionsReport">
	{{#each elections}}
		<div>
			xxx
			{{renderWith "electionReport" this}}
			yyy
			{{renderWith "electionVoters" this}}
		</div>
	{{/each}}
</template>


<template name="electionReport">
	<table style="padding: 4px"><tr>
		<td style="padding: 4px; border:1px solid black">id</td>
		<td style="padding: 4px; border:1px solid black">scenario</td>
		<td style="padding: 4px; border:1px solid black">method</td>
		<td style="padding: 4px; border:1px solid black">numwatchers</td>
		<td style="padding: 4px; border:1px solid black">numvoters</td>
		<td style="padding: 4px; border:1px solid black">r0</td>
		<td style="padding: 4px; border:1px solid black">r1</td>
		<td style="padding: 4px; border:1px solid black">r2</td>
		<td style="padding: 4px; border:1px solid black">s0</td>
		<td style="padding: 4px; border:1px solid black">s1</td>
		<td style="padding: 4px; border:1px solid black">s2</td>
	</tr><tr>
		<td style="padding: 4px; border:1px solid black">{{text._id}}</td>
		<td style="padding: 4px; border:1px solid black">{{text.scenario}}</td>
		<td style="padding: 4px; border:1px solid black">{{text.method}}</td>
		<td style="padding: 4px; border:1px solid black">{{text.watchers.length}}</td>
		<td style="padding: 4px; border:1px solid black">{{text.voters.length}}</td>
		<td style="padding: 4px; border:1px solid black">r0</td>
		<td style="padding: 4px; border:1px solid black">r1</td>
		<td style="padding: 4px; border:1px solid black">r2</td>
		<td style="padding: 4px; border:1px solid black">{{text.stimes.[0]}}</td>
		<td style="padding: 4px; border:1px solid black">{{text.stimes.[1]}}</td>
		<td style="padding: 4px; border:1px solid black">{{text.stimes.[2]}}</td>
	</tr></table>
</template>


<template name="electionVoters">
	<table style="padding: 4px; border:1px solid black"><tr>
		<td style="padding: 4px; border:1px solid black">id</td>
		<td style="padding: 4px; border:1px solid black">eid</td>
		<td style="padding: 4px; border:1px solid black">username</td>
		<td style="padding: 4px; border:1px solid black">watcher</td>
		<td style="padding: 4px; border:1px solid black">step</td>
		<td style="padding: 4px; border:1px solid black">lastStep</td>
		<td style="padding: 4px; border:1px solid black">faction</td>
		<td style="padding: 4px; border:1px solid black">turkSubmitTo</td>
		<td style="padding: 4px; border:1px solid black">workerId</td>
		<td style="padding: 4px; border:1px solid black">assignmentId</td>
		<td style="padding: 4px; border:1px solid black">hitId</td>
		<td style="padding: 4px; border:1px solid black">nonunique</td>
		<td style="padding: 4px; border:1px solid black">_wasntMe</td>
		<td style="padding: 4px; border:1px solid black">_paid</td>
		<td style="padding: 4px; border:1px solid black">times</td>
	</tr>
	{{#each voters text}}
	{{#ifDefined voter.faction}}
	<tr>
		<td style="padding: 4px; border:1px solid black">{{voter._id}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter.eid}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter.username}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter.watcher}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter.step}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter.lastStep}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter.faction}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter.turkSubmitTo}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter.workerId}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter.assignmentId}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter.hitId}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter.nonunique}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter._wasntMe}}</td>
		<td style="padding: 4px; border:1px solid black">{{voter._paid}}</td>
		<td style="padding: 4px; border:1px solid black">
			{{#each stepRecords voter}}{{created}}<br/>{{/each}}
		</td>
	</tr>
	{{/ifDefined}}
	{{/each}}
	</table>
</template>