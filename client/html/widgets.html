
<template name="nextStep">
	{{#if stepWaiting}}<a href="#" onclick="alert('Waiting for others');return false;" id="nextStep" title="Waiting" class="btn btn-primary btn-large">
	Waiting for other voters ({{stepCompletedNum}}/{{scenNumVoters}} or until {{{countdownToStage nextStage "miniCountdownClock" "hunh"}}})</a>
	{{else}}
	<a href="#" onclick="nextStep();return false;" id="nextStep" title="Click to go to next step of experiment" class="btn btn-primary btn-large">
	{{text}} </a> {{{countdownToStage nextStage "miniCountdownClock" "timeDone"}}}
	{{/if}}
</template>


<template name="hunh">
	(no time limit)<!--you should never see this-->
</template>

<template name="timeDone">
	(done)<!--you should never see this-->
</template>

<template name="countdownWithSound">
	
        <audio id="starting" hidden="true">
            <source src="/audio/starting.ogg" type="audio/ogg" />
            <source src="/audio/starting.mp3" type="audio/mpeg" />
            Your browser does not support HTML5 audio.
        </audio>

	{{{countdownToStage 1 "countdownClock" "countdownDone"}}}
</template>

<template name="countdownClock">
	<h1>at {{{displayAbsoluteTime}}} (in {{{displayCount}}})</h1>
</template>

<template name="miniCountdownClock">
	at {{{displayAbsoluteTime}}} (in {{{displayCount}}})
</template>

<template name="countdownDone">
	{{{call "playSoundOnce"}}}
	<div>Experiment is now running! {{stepCompletedNum}}/{{scenNumVoters}} slots taken.</div>
	{{{renderWith "nextStep" "Consent and next"}}}
</template>


<template name="scenarioTable">
	<table class="table">
		<tr><td rowspan="2">Voter faction</td><td rowspan="2">Number of voters in faction</td><td colspan="3">Payment if winner is site:</td></tr>
		<tr>{{#each scen.candNames}}<td >{{this}}</td>{{/each}}</tr>
	{{#with scenMyPayoffs}}
		<tr><td>{{factName}}</td><td>{{factSize}} (including you)</td>
			{{#each payoffs}}<td>{{bonus this}}</td>{{/each}}
		</tr>
	{{/with}}
	{{#each scenOtherPayoffs}}{{#with this}}
		<tr><td>{{factName}}</td><td>{{factSize}}</td>
			{{#each payoffs}}<td>{{bonus this}}</td>{{/each}}
		</tr>
	{{/with}}{{/each}}
	</table>
</template>

<template name="outcomes">
	<table class="table">
		<tr><td>Candidate</td>{{{meth_subtemplate "resultHead"}}}<td>Result</td><td>Your bonus payment</td>{{> factionResultHead}}</tr>
	{{#with winner}}
		<tr><td>{{name}}</td><td>{{{meth_subtemplate "result" this}}}</td><td>WINNER</td><td>{{bonus myPayoff}} - to be paid</td>
			{{#each this.factionCounts}}
				<td><span style="color: {{color}}">{{{meth_subtemplate "result" this}}}</span> </td>
			{{/each}}</tr>
	{{/with}}
	{{#each losers}}{{#with this}}
		<tr><td>{{name}}</td><td>{{{meth_subtemplate "result" this}}}</td><td>LOSER</td><td><small>({{bonus myPayoff}} - if they had won)</small></td>
			{{#each this.factionCounts}}
				<td><span style="color: {{color}}">{{{meth_subtemplate "result" this}}}</span></td>
			{{/each}}</tr>
		</tr>
	{{/with}}{{/each}}
	</table>
</template>



<template name="factionResultHead">
	{{#each factions}}<td><span style="color: {{color}}">Score for<br/>{{name}} voters</span></td>{{/each}}
</template>



<template name="AmazonSubmit">
	<form action="{{user.turkSubmitTo}}/mturk/externalSubmit" >
		<input type="hidden" name="workerId" value="{{user.workerId}}">
		<input type="hidden" name="assignmentId" value="{{user.assignmentId}}">
		<input type="hidden" name="hitId" value="{{user.hitId}}">
		<input type="hidden" name="voterId" value="{{user._id}}">
		<input id="submitButton" type="submit" name="Submit" value="Submit" class="btn btn-primary btn-large">
	</form>
</template>


<template name="madeElection">
	Made your election.
	{{Session "madeEid"}}
	haha
</template>